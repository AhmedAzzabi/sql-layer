<?xml version="1.0" encoding="iso-8859-1" standalone="yes" ?>
<installation version="1.0">
    <info>
        <appname>${izpack.appname}</appname>
        <appversion>${izpack.appversion}</appversion>
        <appsubpath>Akiban</appsubpath>
        <url>http://www.akiban.org/</url>
        <authors>
            <author name="Akiban Technologies" email="support@akiban.com" />
        </authors>
        <javaversion>1.6</javaversion>
        <requiresjdk>yes</requiresjdk>
        <run-privileged condition="izpack.windowsinstall" />
    </info>
    <dynamicvariables>
        <variable name="datadir" value="${INSTALL_PATH}/data" />
        <variable name="logdir" value="${INSTALL_PATH}/log" />
        <variable name="tempdir" value="${INSTALL_PATH}/tmp" />
    </dynamicvariables>
    <conditions>
        <condition type="variable" id="windowsService">
            <name>windowsServiceChecked</name>
            <value>true</value>
        </condition>
        <condition type="and" id="windowsServiceStart">
            <condition type="ref" refid="windowsService" />
            <condition type="variable">
                <name>windowsServiceStartChecked</name>
                <value>true</value>
            </condition>
        </condition>
    </conditions>
    <installerrequirements>
        <installerrequirement condition="izpack.windowsinstall" message="This installer only works on Windows at present." />
    </installerrequirements>
    <guiprefs width="640" height="480" resizable="no">
    </guiprefs>
    <locale>
        <langpack iso3="eng" />
    </locale>
    <resources>
        <res id="LicencePanel.licence" src="LICENSE.txt" />
        <res id="userInputSpec.xml" src="userInputSpec.xml" />
        <res id="shortcutSpec.xml" src="shortcutSpec.xml" />
    </resources>
    <panels>
        <panel classname="HelloPanel" />
        <!--
        <panel classname="InfoPanel" />
        -->
        <panel classname="LicencePanel" />
        <panel classname="TargetPanel" />
        <panel classname="PacksPanel" />
        <panel classname="UserInputPanel" id="UserInputPanel.0" condition="izpack.windowsinstall" />
        <panel classname="ShortcutPanel" />
        <panel classname="InstallPanel" />
        <panel classname="SimpleFinishPanel" />
    </panels>
    <packs>
        <pack name="Server" required="yes">
            <description>Akiban Server</description>
            <fileset dir="." targetdir="$INSTALL_PATH">
              <include name="LICENSE.txt" />
              <include name="bin/*" />
              <include name="config/*" />
              <include name="data" />
              <include name="doc/**/*" />
              <include name="lib/*" />
              <include name="log" />
              <include name="procrun/**/*" />
            </fileset>
            <parsable targetfile="$INSTALL_PATH/config/log4j.properties" type="javaprop" />
            <parsable targetfile="$INSTALL_PATH/config/server.properties" type="javaprop" />
            <executable targetfile="$INSTALL_PATH/bin/akserver.cmd" os="windows" keep="true" stage="postinstall" condition="windowsService">
                <args>
                    <arg value="install" />
                    <arg value="-m" />
                    <arg value="${windowsServiceMode}" />
                </args>
            </executable>
            <executable targetfile="$INSTALL_PATH/bin/akserver.cmd" os="windows" keep="true" stage="postinstall" condition="windowsServiceStart">
                <args>
                    <arg value="start" />
                </args>
            </executable>
            <executable targetfile="$INSTALL_PATH/bin/akserver.cmd" os="windows" keep="true" stage="uninstall" condition="windowsService">
                <args>
                    <arg value="uninstall" />
                </args>
            </executable>
        </pack>
    </packs>
    <native type="izpack" name="ShellLink.dll" />
    <native type="izpack" name="ShellLink_x64.dll" />
</installation>
