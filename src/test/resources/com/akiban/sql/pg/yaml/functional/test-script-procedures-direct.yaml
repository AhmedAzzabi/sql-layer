# Test procedures defined as scripts using Akiban Direct extent accessor
---
- Properties: sys-mysql
- suppressed: true
---
- CreateTable: t1 (id INT NOT NULL PRIMARY KEY)
---
- Statement: INSERT INTO t1 VALUES (1), (10), (100), (5), (33), (42);
---
- Statement: >
    CREATE PROCEDURE test_direct(OUT d INTEGER) AS $$
      importPackage(com.akiban.direct);
      var dcontext = (new Direct).directContext;
      java.lang.System.out.println("dcontext=" + dcontext);
      var extent = dcontext.extent;
      java.lang.System.out.println("extent=" + extent);
      var i = 0;
      var obj = {};
      for (x in Iterator(extent.t1List)) {
        java.lang.System.out.println("x=" + x);
        if (++i == 2) {
          obj.d = x.id;
          break;
        }
      } 
      obj;
    $$ LANGUAGE javascript PARAMETER STYLE variables
---
- Statement: CALL test_direct();
- output: [[5]]
...
