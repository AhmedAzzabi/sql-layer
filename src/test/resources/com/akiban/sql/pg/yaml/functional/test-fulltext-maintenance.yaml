# test that full text indices are updated (and populated) properly
---
- CreateTable: t (id int, name varchar(224));
---
- Statement: INSERT INTO  t VALUES (1, 'bar1');
---
- Statement: INSERT INTO  t VALUES (2, 'bar1');
---
- Statement: INSERT INTO  t VALUES (3, 'bar3');
---
- Statement: INSERT INTO  t VALUES (4, 'bar4');
---
- Statement: CREATE INDEX idx ON t (full_text(name));
--- # blocks until the maintenance is done. Return value of 0 means nothing wrong happened!
- Statement: SELECT fulltext_maintenance_wait();
- output: [[0]]
---
- Statement: select id from t where full_text_search(name = 'bar1');
- output: [[1], [2]]
---
- Statement: UPDATE t set name='foo' WHERE id = 1;
---
- Statement: SELECT fulltext_maintenance_wait();
- output: [[0]]
---
- Statement: select id from t where full_text_search(name = 'bar1');
- output: [[2]]
---
- Statement: SELECT id from t where full_text_search(name = 'bar4');
- output: [[4]]
---
- Statement: DELETE FROM t where id = 4;
---
- Statement: SELECT fulltext_maintenance_wait();
- output: [[0]]
---
- Statement: SELECT id from t where full_text_search(name = 'bar4');
- row_count: 0
...