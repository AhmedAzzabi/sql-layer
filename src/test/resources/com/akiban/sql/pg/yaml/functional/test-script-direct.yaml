# Test procedures defined as scripts using Akiban Direct extent accessor
---
- Properties: sys-mysql
- suppressed: true
---
- CreateTable: t1 (id INT NOT NULL PRIMARY KEY)
---
- Statement: INSERT INTO t1 VALUES (1), (10), (100), (5), (33), (42);
---
- Statement: >
    CREATE PROCEDURE test_direct(IN n INTEGER, OUT d INTEGER) AS $$
      importPackage(com.akiban.direct);
      var extent = Direct.context.extent;
      var obj = {};
      var i = 0;
      for (var x in Iterator(extent.t1.sort("id"))) {
        if (++i == n) {
          obj.d = x.id;
          break;
        }
      } 
      obj;
    $$ LANGUAGE javascript PARAMETER STYLE variables
---
- Statement: CALL test_direct(2);
- output: [[5]]
---
- Statement: CALL test_direct(3);
- output: [[10]]
...
