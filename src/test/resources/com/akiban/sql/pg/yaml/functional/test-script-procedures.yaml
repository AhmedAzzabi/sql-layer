# Test procedures defined as scripts
---
- Statement: >
    CREATE PROCEDURE test_f1(IN x INT, IN y INT, OUT s DOUBLE, OUT d DOUBLE) AS $$
      function f1(x, y, s, d) { 
        s[0] = x + y; 
        d[0] = x - y;
      } 
    $$ LANGUAGE javascript PARAMETER STYLE java EXTERNAL NAME 'f1';
---
- Statement: CALL test_f1(100,99)
- output: [[199.0, 1.0]]
---
- Statement: CREATE PROCEDURE test_b1(IN x INT, IN y INT, OUT s DOUBLE, OUT d DOUBLE) AS $$ s = x + y; d = x - y; $$ LANGUAGE javascript PARAMETER STYLE variables
---
- Statement: CALL test_b1(100,99)
- output: [[199.0, 1.0]]
---
- Statement: CREATE PROCEDURE test_b2(IN x INT, IN y INT, OUT s DOUBLE, OUT d DOUBLE) AS '[x + y, x - y]' LANGUAGE javascript PARAMETER STYLE variables
---
- Statement: CALL test_b2(100,99)
- output: [[199.0, 1.0]]
---
- Statement: >
    CREATE PROCEDURE test_b3(IN x INT, IN y INT, OUT s DOUBLE, OUT d DOUBLE) AS $$ 
      var obj = {};
      obj.d = x - y;
      obj.s = x + y;
      obj
    $$ LANGUAGE javascript PARAMETER STYLE variables
---
- Statement: CALL test_b3(100,99)
- output: [[199.0, 1.0]]
---
- Statement: SET OutputFormat TO 'json_with_meta_data';
---
- Statement: CALL test_b1(100,99)
- output: [['[{"name":"s","oid":701,"type":double"},{"name":"d","oid":701,"type":double"}]'],['{"s":199.0,"d":1.0}']]
---
- Statement: SET OutputFormat TO DEFAULT;
---
# Procedure as function
- Statement: SELECT test_f1(100,99)
- error: [4251B]
---
- Statement: CALL no_such_proc()
- error: [42519]
...
