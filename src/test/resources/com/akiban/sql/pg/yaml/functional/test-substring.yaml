#test the SUBSTR and SUBSTRING functions
---
- Include: all-types-schema.yaml
---
- Statement: INSERT INTO all_types(varchar_field, integer_field, double_field) VALUES ('quadratically', 3, 5.0), ('Sakila', -3, -5.0);
--- # test SUBSTRINNG in SELECT clause, with 3 args
- Statement: SELECT SUBSTRING(varchar_field, 5, LENGTH(varchar_field) - 4) from all_types;
- output: [['ratically'], ['la']]
--- # test SUBSTRING with 3 args
- Statement: SELECT SUBSTRING('quadratically', integer_field, double_field + 1) FROM all_types WHERE integer_field = 3;
- output: [['adrati']]
--- # test with null
- Statement: SELECT SUBSTRING(null, 2) from all_types;
- output: [[null], [null]]
---
- Statement: SELECT SUBSTRING(null, 1, 3) from all_types;
- output: [[null], [null]]
--- # test with null as second arg
- Statement: SELECT SUBSTRING('abc', null) from all_types;
- output: [[null], [null]]
--- # test with null as third arg
- Statement: SELECT SUBSTRING('xyz', 1, null) from all_types;
- output: [[null], [null]]
--- # test with null
- Statement: SELECT SUBSTRING(null, null, null) from all_types;
- output: [[null], [null]]
--- # test with params
- Statement: SELECT SUBSTRING(?, 2, 3) from all_types;
- params: [['abcd']]
- output: [['bcd'], ['bcd']]
--- # test with params
- Statement: SELECT SUBSTRING('xyzt', ?, 3) from all_types;
- params: [[2]]
- output: [['yzt'], ['yzt']]
--- # test index out of bound
- Statement: SELECT SUBSTRING('ABC', 4 ) from all_types;
- output: [[''], ['']]
--- # test empty string
- Statement: SELECT SUBSTRING('', 2, 0) from all_types;
- output: [[''], ['']]
--- # test SUBSTRING in WHERE clause
- Statement: SELECT double_field from all_types WHERE SUBSTRING(varchar_field, integer_field, LENGTH(varchar_field) - integer_field + 1) = 'ila';
- output: [[-5.0]]
--- 
- Statement: SELECT SUBSTRING('Sakila', 1, 6) from all_types;
- output: [['Sakila'], ['Sakila']]
--- # test with empty string
- Statement: SELECT SUBSTRING('', 1, 1) from all_types;
- output: [[''], ['']]
--- # test wrong arity: excessive arguments
- Statement: SELECT SUBSTRING('ABC', 1, 2, 3) from all_types;
- error: [42000]
...
