#test the SUBSTR and SUBSTRING functions
---
- Include: all-types-schema.yaml
---
- Statement: INSERT INTO all_types(varchar_field, integer_field, double_field) VALUES ('quadratically', 3, 5), ('Sakila', -3, -5.0);
--- # test SUBSTRINNG in SELECT clause, with 2 args
- Statement: SELECT SUBSTRING(varchar_field, 5) from all_types;
- output: [['ratically']]
--- # test SUBSTR with 3 args
- Statement: SELECT SUBSTR('quadratically', integer_field, double_field + 1) FROM all_types WHERE integer_field = 3;
- output: [['ratica']]
--- # test with null
- Statement: SELECT SUBSTR(null, 2) from all_types;
- output: [[null]]
---
- Statement: SELECT SUBSTR(null, 1, 3) from all_types;
- output: [[null]]
--- # test with null as second arg
- Statement: SELECT SUBSTR('abc', null) from all_types;
- output: [[null]]
--- # test with null as third arg
- Statement: SELECT SUBSTR('xyz', 1, null) from all_types;
- output: [[null]]
--- # test with null
- Statement: SELECT SUBSTR(null, null, null) from all_types;
- output: [[null]]
--- # test with params
- Statement: SELECT SUBSTR(?, 2) from all_types;
- params: [['abcd']]
- output: [['bcd']]
--- # test with params
- Statement: SELECT SUBSTR('xyzt', ?) from all_types;
- params: [[2]]
- output: [['yzt']]
--- # test index out of bound
- Statement: SELECT SUBSTR('ABC', 4) from all_types;
- output: [['']]
--- # test empty string
- Statement: SELECT SUBSTR('', 2) from all_types;
- output: [['']]
--- # test SUBSTR in WHERE clause
- Statement: SELECT double_field from all_types WHERE SUBSTR(varchar_field, integer_field) = 'ila';
- output: [[-5.0]]
--- # test with empty string
- Statement: SELECT SUBSTR('') from all_types;
- output: [['']]
--- # test wrong arity: empty list
- Statement: SELECT SUBSTR('ABC', 1, 2, 3) from all_types;
- error: [42000]
...
