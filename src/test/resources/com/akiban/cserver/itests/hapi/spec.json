{
"comment" : ["See spec file: ",
    "https://spreadsheets.google.com/a/akiban.com/ccc?key=0AiGr_XWdHm0edFNSaFZwUXd5SnAtOHlDcTJyOEUzdXc",
    "This test plan has a couple modifications from that spec:",
    "   - no orphan rows",
    "   - giving customer id=9 an address"
],

"setup" : {
    "schema" : "coi",
    "tables" : [
        [ "customer",
            "cid int key",
            "name varchar(32)"
        ],
                        
        [ "orders",
            "oid int key",
            "c_id int",
            "when varchar(10)",
            "CONSTRAINT __akiban_o FOREIGN KEY __akiban_o (c_id) REFERENCES customer(cid)"
        ],
                        
        [ "item",
            "iid int key",
            "o_id int",
            "sku int",
            "CONSTRAINT __akiban_i FOREIGN KEY __akiban_i (o_id) REFERENCES orders(oid)"
        ],

        [ "address",
            "aid int key",
            "c_id int",
            "street varchar(32)",
            "CONSTRAINT __akiban_a FOREIGN KEY __akiban_a (c_id) REFERENCES customer(cid)"
        ]
    ],
    "write_rows" : {
        "customer"  : [ [1, "Alpha"],
                        [9, "Bravo"]
        ],
        "orders"    : [ [1, 1, "1/1/2001"],
                        [2, 1, "2/2/2002"],
                        [3, 1, "3/3/2003"]
        ],
        "item"      : [ [1, 1, 1111],
                        [2, 1, 2222],
                        [3, 3, 3333]
        ],
        "address"   : [ [1, 1, "500 Harrison"],
                        [2, 9, "1 Akiban Way"]
        ]
    }
},

"tests" : {
    "from root" : {
        "get"           : "coi:customer:cid=1",
        "expect"        : "TBD"
    },

    "from child" : {
        "get"           : "coi:order:oid=2",
        "expect"        : "TBD"
    },

    "from predicate's child" : {
        "get"           : "coi:order:(customer)name=bob",
        "expect"        : "ERROR"
    }
}

}
